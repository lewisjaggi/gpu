#include "NoyauCreator.h"
#include <iostream>
#include <assert.h>
#include <math.h>
using std::cout;
using std::endl;
/*----------------------------------------------------------------------*\
|*			 Implementation					*|
 \*---------------------------------------------------------------------*/
/*--------------------------------------*\
|*	 	Constructeur		*|
 \*-------------------------------------*/
NoyauCreator::NoyauCreator()
    {
    create();
    check();
    }
NoyauCreator::~NoyauCreator()
    {
    delete[] tabNoyau;
    }
/*--------------------------------------*\
|*		 Methode		*|
 \*-------------------------------------*/
float* NoyauCreator::getTabNoyau()
    {
    return tabNoyau;
    }

/*--------------------------------------*\
|*		 Private		*|
 \*-------------------------------------*/
void NoyauCreator::create(void)
    {
    tabNoyau =
	    new float[W * W]
		{
		0.0828, 0.1987, 0.3705, 0.5366, 0.6063, 0.5366, 0.3705, 0.1987, 0.0828,
		0.1987, 0.4746, 0.8646, 1.1794, 1.2765, 1.1794, 0.8646, 0.4746, 0.1987,
		0.3705, 0.8646, 1.3475, 1.0033, 0.4061, 1.0033, 1.3475, 0.8646, 0.3705,
		0.5366, 1.1794, 1.0033, -2.8306, -6.4829, -2.8306, 1.0033, 1.1794, 0.5366,
		0.6063, 1.2765, 0.4061, -6.4829, -12.7462, -6.4829, 0.4061, 1.2765, 0.6063,
		0.5366, 1.1794, 1.0033, -2.8306, -6.4829, -2.8306, 1.0033, 1.1794, 0.5366,
		0.3705, 0.8646, 1.3475, 1.0033, 0.4061, 1.0033, 1.3475, 0.8646, 0.3705,
		0.1987, 0.4746, 0.8646, 1.1794, 1.2765, 1.1794, 0.8646, 0.4746, 0.1987,
		0.0828, 0.1987, 0.3705, 0.5366, 0.6063, 0.5366, 0.3705, 0.1987, 0.0828
		};
    }

void NoyauCreator::check()
    {
    double sumNoyau = sum(tabNoyau, W * W);
    assert(fabs(sumNoyau) <= 1e-3);
    }

/**
 * static
 */
double NoyauCreator::sum(float* tab, int n)
    {
    double sum = 0;
    for (int i = 0; i < n; i++)
	{
	sum += (double) tab[i];
	}
    return sum;
    }
